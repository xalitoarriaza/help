---

template:    article
title:       How to deploy on fortrabbit
naviTitle:   Deployment
lead:        Get your code up with a simple git push, see advanced configuration.
linkOther:   /git-old-app

keywords:
    - beginner
    - dashboard

tags:
     - git

seeAlsoLinks:
    - deployment
    - deployment-architecture-video
    - git-submodules
    - deployment-file-v2
    - directory-structure
    - ssh-sftp-old-app
    - security
    - quirks
    - ssh-keys


---

## Get ready

We assume that you have: [Git installed](git) locally and know the basics. We further assume that [your public SSH key saved with your fortrabbit Account](ssh-keys) as authentication to access code is done with these keys.

## Usage

Each fortrabbit App comes with its very own custom Git repo which you need to set as a Git remote in your local Git working copy. To deploy just push your code to that remotes master branch.

## Simplified deployment workflow log

```bash
# Cloning the (empty) app to register the remote origin master
$ git clone git@deploy.eu2.frbit.com:app-name.git

# do stuff
$ edit index.php

# push to deploy
$ git add index.php
$ git commit -am 'Some changes'
$ git push -u origin master

# et voilà — worship your work in the browser
```

## Behind the scenes


```nohighlight
 ######                                             ######
# O  O #                             +—————+       # O  O #
#   )  #                             |     |       #  (   #
 \╰──╯/             +——————+         | App |<-----  \╰──╯/
   ||   --Git push->| Repo |-deploy->|     |          ||
  you               +——————+         +—————+        visitor
                                        ^
                                        |
                                        v
                                     +————+
                                     | DB |
                                     +————+
```

Your `git push` updates the Git remote on fortrabbit and triggers the build of a new release package. This new release package will then be distributed to all the Nodes your App runs on. All files on the Nodes will then be replaced by the ones contained in the release package. Check out [this video](deployment-architecture-video) to understand the flow.


## The branch name counts

While you can have as many Git branches you want, only changes in certain branches will be deployed. Besides the `master` Branch also any branch named like the App itself - like `my-app`, if that's the name of your App - will be considered. The latter helps when working with [multi staging setups](multi-staging).

## Deployment file

Fine tune deployment configurations with the `fortrabbit.yml` deployment file: control the way Composer runs, define pre- & post-deploy scripts and more. You can find a full example [here](deployment-file-v2).

## Composer

New Apps will always run an [Composer](composer) install after a successful `git push` - as long as both `composer.json` and `composer.lock` are present. Read on [here](composer).

## Private Git/Composer repos

You can also include your own private Composer repository as described [here](private-composer-repos).

## Large files

We don't actively enforce a file limit, but you should not put big binary files (> 2 MB) into your Git repo. It would bloat your repository and slows down deployment.

## Deployment release package

The release package is a gzipped archive which contains: the Apps Git repository + vendor folder + all files generated by pre or post deployment scripts. In short: compressed size of ``~/htdocs``.

To keep deployment fast for everyone the size of the release package is [limited](http://www.fortrabbit.com/specs#limits). You can find out the release package size locally by packaging the local copy of your App, including the `vendor` folder and anything else generated by your build scripts:

```bash
tar -zcf my-project.tar.gz my-project/
ls -lh my-project.tar.gz
```

## Integrating with GitHub & Bitbucket

We don't have any fancy GitHub/Bitbucket integrations (yet), but it is easily possible to combine your fortrabbit repo with Bitbucket/Guthub as described [here](bitbucket-github-and-fortrabbit).
